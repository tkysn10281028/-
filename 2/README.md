### データベースの概要　歴史など   
   
データベース：   
database   
全ての情報を見ることができる。   
   
1. データ独立   
昔：   
システム毎にデータを保存してファイルを格納   
   
それぞれのシステムが別々にデータを管理   
同じデータを重複して持つためデータの受け渡し効率悪い   
   
システムからデータを独立させて別に管理する発想   
   
2. データモデル   
現実世界のデータをデータベースに適切に変換して格納する方法   
   
概念データモデル：データの内容をまとめた抽象的なモデル   
論理データモデル：データベースで実際に実装可能なモデル   
物理データモデル：データをDBMSで物理的に配置するモデル   
   
論理テータモデル：リレーショナル型を覚えておく   
   
改装型モデル   
階層構造の親子関係は一対一か一対多   
それぞれで管理していて交わりがない   
   
ネットワークモデル：   
階層型では表現できない複数の親を持つ場合など。   
   
関係もでる：   
テーブルとテーブルの間の関連でデータを表現   
   
3. 関係もでる   
データ及びデータ間の関連は全てリレーションとタプルで表現する。   
   
りれーしょん：   
ドメインとは集合のこと。人名の集合や年齢の集合など。   
   
ドメインの直積   
それぞれのドメインを掛け合わせた関係   
   
１行１行のことをタプルという。必要なタプルのみを選んだ直積の部分集合をリレーションという。   
   
関係モデル：   
   
まずドメインがある。ドメインは定義域のこと。   
例：   
商品　   
コーラ　オレンジジュース   
金額   
200 100   
(コーラ,200)   
(コーラ,100)   
(オレンジジュース,200)   
(オレンジジュース,100)   
   
1行1行の組み合わせのことをタプルという。このうちありうる組み合わせのみをピックアップしたものがリレーションとなる。   
   
4. データベース化の産地論理   
産地論理 0,1,NULL   
に値論理　0,1のみ   
NULLを使用するパターンは2つ。   
①不明未知   
まだわからん。あとで設定するかも。   
   
②非存在・適用不能   
返却年月日にNULLを指定する場合   
   
メールアドレスがNULLの場合は同様に2つの意味が考えられる。   
①メールアドレスはまだわからん   
②メールアドレスを持っていない   
   
NULLは値ではないためデータを数えようとしてもできない。   
   
### システム開発とデータベース   
データベースは単独では利用しない。何らかのシステムから利用する。   
システム開発のアプローチは3つのパターンがある。   
   
1. プロセス中心のアプローチ   
ソフトウェアの機能を中心に考える。バッチシステムみたいなやつ。   
   
2. データ中心アプローチ   
最初にデータベースの設計を行うことでデータの整合性を保つ。webシステム？   
   
3. オブジェクト指向アプローチ   
まあ色々。UMLとかを使用する。   
   
データ中心アプローチ   
現実世界→概念設計→概念データモデル→論理データモデル　及び　物理データモデル   
   
データモデルを三層に分けるのはデータ独立を行って変更に強いシステムを作るため。   
   
概念データモデル   
   
物理データ独立   
   
３層スキーマアーキテクチャ   
   
スキーマ：データベースの構造のこと。   
   
外部スキーマ：   
データベースに関係ないプログラムやユーザーが使用する   
   
概念スキーマ：   
エンティティやテーブルテーブル間の記述   
   
内部スキーマ：   
データベースをどのように物理的に配置するか   
   
### データウェアハウスとデータマイニング   
基幹システムと分析システム   
基幹システムはトランザクションなどの一連の処理単位毎にデータベースの更新を行う   
   
正確に高速にデータ行をこうしんできる仕組み   
関係データベースがよく使われる。   
   
分析システム   
売上分析やアクセス分析など。   
基幹システムのデータを取得して分析を行い、データの更新は行わない。   
   
OLAPでデータのスナップショットを撮って別のデータベースに移す。   
列指向のデータベース   
   
selectしたものを使用するケースが多い。   
   
BI   
ビジネスインテリジェンス   
企業などの組織に関するデータを収集蓄積して分析して活用する   
   
分析システムの４段階   
   
ビッグデータ：   
RDBMSでは扱いきれない量のデータ   
３Vが特徴   
   
### 正規化理論   
目的：   
①タプル更新時に起きる異常の更新時異常を防ぐ   
②1つのデータは１箇所にのみ存在する 1箇所1事実   
   
正規化を行うことで更新時異状を防げるが、正規化しない方が早いとも言える（データを集める際に表の結合操作が必要なため）   
①データを更新しないデータウェアハウスなど   
②データの履歴を残すもの   
③高速化が必要なもの   
   
非正規形   
   
更新時異状   
①タプル挿入時異状   
挿入時に値がないデータを入れられない   
②タプル更新時異状   
更新時に手動で複数のデータを更新しないと矛盾が出る   
③タプル削除時異状   
そのレコードにしかいないデータを消すとデータが消える   
   
1. 関数従属性   
ある属性Xの値が決まれば別属性Yの値が決まる。   
   
2. 導出属性   
他の属性から演算を行う音で導くことができる導出属性がある。   
残しても良いケースがあある。   
3. 情報無損失分解   
分解した関係を自然結合した際に元に戻せる分解の仕方   
   
メタデータ：   
データについてのデータ   
商品(商品番号、商品名)   
   
商品は関係名、（）の中は属性名。   
   
   
4. 第一正規形   
シンプルなドメイン上で定義された関係   
   
シンプルなドメインとは属性が全て単一値を取ること   
   
直積集合の排除   
集合の集合   
   
→二つの集合に分ける   
冪集合の排除   
一つの値に対して複数の値が対応している状態   
   
候補キー   
リレーションのタプルを一意に識別できる属性または属性の組のうち極小のもの   
   
主キー   
候補キーから一つ選ぶ。主キーがどれになるかはシステムによる   
   
ただ、主キー空値はできない。   
   
主キー以外の候補キーは代理キーという。   
   
関係スキーマ   
関係名(属性名1,属性名2,属性名3,属性名4)   
   
   
5. 第二正規系   
全ての非キー属性が各候補キーに完全関数従属している。各候補キーの一部に従属する部分関数中↑うせをなくす   
   
   
第一正規系だけだと更新時異状が起きる。   
   
第二正規系の定義：   
①第一正規系である   
②全ての非キー属性は核候補キーに完全関数従属している   
   
   
6. 第三正規系   
第二正規系でも更新時異状はおきうる。   
   
第三正規系   
第二正規系である   
全ての非キー属性はいかなる候補キーにも推移的に関数従属しない   
   
推移的関数中属性   
X ,Y,Zが存在した時に   
   
XはYに関数従属する   
YはXに関数従属しない   
YはZに関数従属する   
   
外部きー   
複数の関係を結びつけるキー   
   
7. 高次の正規系   
ボイスコッド正規系   
   
従属性が失われる場合もあるので注意が必要。   
   
### 関係演算   
関係演算の種類   
２つの関係に和演算を行った結果   
   
和   
UNION   
   
差   
   
積   
   
直積   
   
射影   
   
選択   
   
結合   
直咳をとって、共通の属性が等しいものを選択して、共通の属性の一つを除いたものの射影を取る   
   
θ結合   
直咳して選択する段階でθの関係を満たすもののみを選択する   
   
等結合   
θ結合の等しくした場合   
自然結合   
一方のいらないカラムを削除する   
結合する値が２つの関係で一致したもののみを抽出する場合を内部結合   
   
外部結合   
左外部結合   
左側の行は全て取り出す   
   
右側の行は結合される方の関係が一致するもののみ取り出す。存在しない場合はNULLが入る   
   
右外部結合   
右側の行は全て取り出す   
   
### データベース設計   
   
   
   
   
   
   
   
   
   
   
   
   
